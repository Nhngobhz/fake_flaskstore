{% extends "admin/base.html" %}
{% block content %}
<h2 class="mb-4"><i class="bi bi-plus-circle"></i> {{ category.id if category else "Add" }} Category</h2>
<form method="POST">
    <div class="mb-3">
        <label for="name" class="form-label"><i class="bi bi-tag"></i> Category Name</label>
        <input type="text" name="name" id="name" placeholder="Enter category name" value="{{ category.name if category else '' }}" required class="form-control">
    </div>

    <div class="mb-3">
        <label for="parent_id" class="form-label"><i class="bi bi-diagram-3"></i> Parent Category</label>
        <select name="parent_id" id="parent_id" class="form-select">
            <option value="" {% if not category or not category.parent_id %}selected{% endif %}>-- No Parent --</option>
            {% for cat in categories %}
                {# Avoid showing the category itself in parent list to prevent self-reference #}
                {% if not category or cat.id != category.id %}
                    <option value="{{ cat.id }}" {% if category and category.parent_id == cat.id %}selected{% endif %}>{{ cat.name }}</option>
                {% endif %}
            {% endfor %}
        </select>
    </div>

    <button type="submit" class="btn btn-dark"><i class="bi bi-check-circle"></i> {{ "Update" if category else "Add" }}</button>
</form>
<br>
<a href="{{ url_for('list_categories') }}" class="btn btn-secondary btn-back"><i class="bi bi-arrow-left"></i> Back</a>
{% endblock %}
