{% extends "admin/base.html" %}
{% block content %}
<h2 class="mb-4"><i class="bi bi-plus-circle"></i> {{ product.id if product else "Add" }} Product</h2>
<form method="POST" enctype="multipart/form-data">
    <div class="mb-3">
        <label for="title" class="form-label"><i class="bi bi-card-text"></i> Title</label>
        <input type="text" name="title" id="title" placeholder="Enter product title" value="{{ product.title if product else '' }}" required class="form-control">
    </div>
    <div class="mb-3">
        <label for="description" class="form-label"><i class="bi bi-file-text"></i> Description</label>
        <textarea name="description" id="description" placeholder="Enter description" required class="form-control">{{ product.description if product else '' }}</textarea>
    </div>
    <div class="mb-3">
        <label for="price" class="form-label"><i class="bi bi-cash"></i> Price</label>
        <input type="number" step="0.01" name="price" id="price" placeholder="Enter price" value="{{ product.price if product else '' }}" required class="form-control">
    </div>
    <div class="mb-3">
        <label for="image" class="form-label"><i class="bi bi-image"></i> Upload Image</label>
        <input type="file" name="image" id="image" class="form-control" {% if not product %}required{% endif %}>
        {% if product and product.image %}
            <p>Current Image: <img src="{{ url_for('static', filename='products/' + product.image) }}" alt="Product Image" style="max-height: 100px;"></p>
        {% endif %}
    </div>
    <div class="mb-3">
        <label for="category_id" class="form-label"><i class="bi bi-tags"></i> Category</label>
        <select name="category_id" id="category_id" class="form-select" required>
            {% for cat in categories %}
            <option value="{{ cat.id }}" {% if product and product.category_id == cat.id %}selected{% endif %}>{{ cat.name }}</option>
            {% endfor %}
        </select>
    </div>
    <button type="submit" class="btn btn-dark"><i class="bi bi-check-circle"></i> {{ "Update" if product else "Add" }}</button>
</form>
<br>
<a href="{{ url_for('list_products') }}" class="btn btn-secondary btn-back"><i class="bi bi-arrow-left"></i> Back</a>
{% endblock %}
