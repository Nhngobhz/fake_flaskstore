{% extends "admin/base.html" %}
{% block content %}
<h2>{{ "Edit" if product else "Add" }} Product</h2>

<form method="POST" enctype="multipart/form-data">
    <div class="mb-3">
        <label for="title" class="form-label">Title</label>
        <input type="text" name="title" id="title" placeholder="Enter product title"
               value="{{ product.title if product else '' }}" required class="form-control">
    </div>

    <div class="mb-3">
        <label for="description" class="form-label">Description</label>
        <textarea name="description" id="description" placeholder="Enter description" required
                  class="form-control">{{ product.description if product else '' }}</textarea>
    </div>

    <div class="mb-3">
        <label for="price" class="form-label">Price</label>
        <input type="number" step="0.01" name="price" id="price" placeholder="Enter price"
               value="{{ product.price if product else '' }}" required class="form-control">
    </div>

    <div class="mb-3">
        <label for="image" class="form-label">Upload Image</label>
        <input type="file" name="image" id="image" class="form-control" {% if not product %}required{% endif %}>
        {% if product and product.image %}
            <p class="mt-2">
                <strong>Current Image:</strong><br>
                <img src="{{ url_for('static', filename='products/' + product.image) }}"
                     alt="Product Image" style="max-height: 120px; border-radius: 6px;">
            </p>
        {% endif %}
    </div>

    <div class="mb-3">
        <label for="category_id" class="form-label">Category</label>
        <select name="category_id" id="category_id" class="form-select" required>
            {% for cat in categories %}
            <option value="{{ cat.id }}" {% if product and product.category_id == cat.id %}selected{% endif %}>
                {{ cat.name }}
            </option>
            {% endfor %}
        </select>
    </div>

    <button type="submit" class="btn btn-dark">{{ "Update" if product else "Add" }}</button>
</form>

<br>
<a href="{{ url_for('list_products') }}" class="btn btn-secondary btn-back">‚Üê Back</a>
{% endblock %}
